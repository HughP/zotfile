<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ZotFile - Advanced PDF management for Zotero</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- google analytics tracking code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-22825629-1', 'zotfile.com');
      ga('send', 'pageview');

    </script>
  </head>

  <!-- flattr -->
  <script type="text/javascript">
  /* <![CDATA[ */
      (function() {
          var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
          s.type = 'text/javascript';
          s.async = true;
          s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
          t.parentNode.insertBefore(s, t);
      })();
  /* ]]> */
  </script>
  <!-- twitter -->
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
  </script>
  <body>
    <div class="wrapper">
      <header>
        <h1 style="margin:0 0 10px;">ZotFile</h1>
        <h4 style="margin:0 0 25px;">Advanced PDF management for Zotero</h4>

        <p class="view">
          <h3 style="margin:0 0 0px;"><a style="font-weight:600;" href="https://addons.mozilla.org/firefox/downloads/file/325964/zotfile-4.1.6-fx.xpi?src=dp-btn-primary">Download</a></h3>
          <!-- <a style="margin:0 0 55px;" href="https://addons.mozilla.org/en-US/firefox/addon/zotfile/">DOWNLOAD</a><br> -->
          <!-- <small><a href="https://addons.mozilla.org/firefox/downloads/file/325964/zotfile-4.1.6-fx.xpi?src=dp-btn-primary">Download from Chrome or Safari</a></small><br> -->
          <small><a href="https://github.com/jlegewie/zotfile">View the Project on GitHub</a></small>
        </p>

        <form action="https://www.paypal.com/cgi-bin/webscr" onClick="_gaq.push(['_trackEvent', 'external-links', 'donation']);" method="post">
          <input type="hidden" name="cmd" value="_s-xclick">
          <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
          ">
          &nbsp;&nbsp;&nbsp;&nbsp;<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="FlattrButton" style="display:none;" rev="flattr;button:compact;" href="http://www.columbia.edu/~jpl2136/zotfile.html"></a>
          <noscript><a href="http://flattr.com/thing/344324/ZotFile" target="_blank">
          <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a></noscript>
          <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
          </form>

          <br><br>
          <h3 style="margin:0 0 5px;">Content</h3>
          <p class="view">
            <a class="navi" href="#features">Features <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#install-zotfile">Install Zotfile <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#renaming-rules">Renaming Rules <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#user-defined-wildcards">User-Defined Wildcards <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#extract-pdf-annotations">Extract PDF Annotations <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#hidden-options">Hidden Options <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#reporting-a-bug">Reporting a Bug <span class="navi-seperator">&#8226; </span></a>
            <a class="navi" href="#changelog">Changelog</a>
          </p>

          <br>
          <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jlegewie.com/zotfile.html" data-text="ZotFile: Advanced PDF management for Zotero">Tweet</a>

      </header>
      <section>




<h3 id="features"><a name="user-content-features" href="#features" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>FEATURES</h3>
<p>Zotfile is a Zotero plugin to manage your attachments: automatically rename, move, and attach PDFs (or other files) to Zotero items, sync PDFs from your Zotero library to your (mobile) PDF reader (e.g. an iPad, Android tablet, etc.) and extract annotations from PDF files.</p>
<h4 id="attach-new-files-to-zotero-items"><a name="user-content-attach-new-files-to-zotero-items" href="#attach-new-files-to-zotero-items" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>★ Attach New Files to Zotero Items</h4>
<p>ZotFile can rename and add the most recently modified file from the Firefox download or a user specified folder as a new attachment to the currently selected Zotero item. It renames the file using metadata from the selected Zotero item (user configurable), and stores the file as a Zotero attachment to this item (or alternatively, moves it to a custom location).</p>
<h4 id="batch-rename-and-move-attachments-based-on-zotero-metadata"><a name="user-content-batch-rename-and-move-attachments-based-on-zotero-metadata" href="#batch-rename-and-move-attachments-based-on-zotero-metadata" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>★ (Batch) Rename and Move Attachments based on Zotero Metadata</h4>
<p>The user can also select any number of Zotero items and automatically rename and move all attachments of these items according to the user defined rules using metadata of the respective zotero item (batch processing).</p>
<h4 id="sync-pdfs-with-your-ipad-or-android-tablet"><a name="user-content-sync-pdfs-with-your-ipad-or-android-tablet" href="#sync-pdfs-with-your-ipad-or-android-tablet" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>★ Sync PDFs with your iPad or Android tablet</h4>
<p>To read and annotate PDF attachments on your mobile device, zotfile can sync PDFs from your Zotero library to your (mobile) PDF reader (e.g. an iPad, Android tablet, etc.). Zotfile sends files to a location on your PC or Mac that syncs with your PDF reader App (PDF Expert, iAnnotate, GoodReader etc.), allows you to configure custom subfolders for easy access, and even extracts the annotations and highlighted text to Zotero notes when you get the files back from your tablet. Instructions are below.</p>
<h4 id="extract-annotations-from-pdf-files"><a name="user-content-extract-annotations-from-pdf-files" href="#extract-annotations-from-pdf-files" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>★ Extract Annotations from  PDF Files</h4>
<p>After highlighting and annotating pdfs on your tablet (or with the PDF reader application on your computer), ZotFile can automatically extract the highlighted text and note annotations from the pdf. The extracted text is saved in a Zotero note. Thanks to Joe Devietti, this feature is now available on all platforms based on the pdf.js library.</p>
<p><img alt="" src="http://jlegewie.github.io/zotfile/pics/pdf-annotation-full.png" /></p>
<h3 id="install-zotfile"><a name="user-content-install-zotfile" href="#install-zotfile" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>INSTALL ZOTFILE</h3>
<p>To start using zotfile, make sure that Zotero is installed and follow these simple steps:</p>
<ol>
<li>
<p>Install ZotFile</p>
<p>For <em>Zotero Firefox</em>, click on the the download link above and follow the instructions on the Mozilla Add-Ons page. For <em>Zotero Standalone</em>, first download the extension file (follow the download link above, click on &lsquo;Continue to Download&rsquo;. In Firefox, right-click &lsquo;Add to Firefox&rsquo; and select &lsquo;Save Link As&rsquo;. In other browsers, click on &lsquo;Download Now&rsquo; (it&rsquo;s greyed out) and then &lsquo;download anyway&rsquo;). Now start Zotero Standalone, and go to &lsquo;Tools-&gt;Add-ons-&gt;Tools for all Add-ons (the small,drop-down wheel in the top right corner)-&gt;Install Add-on From File&rsquo; and pick the downloaded .xpi file.</p>
</li>
<li>
<p>Change the Source Folder for Attaching new Files</p>
<p>To attach new files to Zotero items, zotfile looks  for the most recently modified (e.g. just downloaded) file in a user specified folder. For Zotero Firefox, this option is set to the Firefox download folder by default. For Zotero Standalone, this option has to be changed on the &lsquo;General Settings&rsquo; tab in the preference window (Zotero Actions -&gt; ZotFile Preferences). The source folder can be set to any location but I generally recommend setting it to your browser&rsquo;s download folder such as ~/Downloads on the mac for most browsers.</p>
</li>
<li>
<p>Changing other Options (optional)</p>
<p>ZotFile offers many other options that can be changed by the user. Most of them are located in the zotfile preference window under Zotero Actions -&gt; ZotFile Preferences.</p>
</li>
</ol>
<h4 id="syncing-pdf-attachments-with-your-ipad-or-android-tablet"><a name="user-content-syncing-pdf-attachments-with-your-ipad-or-android-tablet" href="#syncing-pdf-attachments-with-your-ipad-or-android-tablet" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Syncing pdf attachments with your ipad or android tablet</h4>
<p>To read and annotate PDF attachments on your mobile device, zotfile can sync PDFs from your Zotero library to your (mobile) PDF reader (e.g. an iPad, Android tablet, etc.). For this purpose, Zotfile sends files to a location on your PC or Mac that syncs with your PDF reader App (PDF Expert, iAnnotate, GoodReader etc.), and gets them back when you have finished reading them. To get started, first set up a folder on your PC or Mac that syncs with your tablet reader application. Files that are copied to this folder should automatically appear in your PDF reader application. One possibility is Dropbox, which is free for up to 2GB of space and works with most PDF reader apps. More detailed instructions as well as alternative options should be available on the website of your PDF reader App. Second, open the &lsquo;Tablet Settings&rsquo; tab in the zotfile preference window and enable the option &lsquo;Use ZotFile to send and get files from tablet&rsquo;. Third, change the zotfile location for files on the tablet to the folder that syncs with your pdf reader app (&lsquo;Base Folder&rsquo; on the &lsquo;Tablet Settings&rsquo; tab). Forth (optional), set up subfolders that make it easy to sort your files in the tablet folder so that you can easily find them on your tablet.<br />
You can now start sending pdfs (or other files) to your tablet. Simply right-click on a zotero item and select &lsquo;Send to Tablet&rsquo; under &lsquo;Manage Attachments&rsquo;. When you are done reading and annotating your pdf, just get the file back from the tablet by clicking on &lsquo;Get from Tablet&rsquo; under &lsquo;Manage Attachments&rsquo;. ZotFile will automatically remove the file from your tablet folder and extract the annotations from the pdf file to a zotero note. Alternatively, you can use the &lsquo;Scan Tablet Files&rsquo; function in Zotero&rsquo;s Action Menu to automatically check whether any files in the tablet folder have changed. ZotFile then asks the user how to proceed for each modified file.</p>
<h3 id="renaming-rules"><a name="user-content-renaming-rules" href="#renaming-rules" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>RENAMING RULES</h3>
<p><img alt="" src="http://jlegewie.github.io/zotfile/pics/zotfile-reader-rename.jpg" /></p>
<p>ZotFile renames files based on bibliographic information from the currently selected Zotero item. You can change the renaming rules in the zotfile preference window under renaming rules (Zotero Actions -&gt; ZotFile Preferences). The option &lsquo;Renaming Format&rsquo; allows you to create custom renaming rules using wildcards, which are replaced by metadata from the selected Zotero item. Zotfile also supports optional and exclusive wild-cards. Optional wild-cards mean that <code>{-%y}</code> only includes the seperator <code>-</code> in the filename if <code>%y</code> is defined. Exclusive wild-cards such as <code>%s|%j</code> will generate the entry for <code>%s</code> if that exists and the entry for <code>%j</code> otherwise. Other characters between the wildcards and the bar are ignored (<code>%s | stuff %j | - more %p</code> is equivalent to <code>%s|%j|%p</code>). Some examples are below.</p>
<h4 id="wildcards"><a name="user-content-wildcards" href="#wildcards" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Wildcards</h4>
<ul>
<li><code>%a</code> last names of authors (not editors etc) or inventors. The maximum number of authors are changed under &lsquo;Additional Settings&rsquo;.</li>
<li><code>%I</code> author initials.</li>
<li><code>%F</code> author&rsquo;s last name with first letter of first name (e.g. EinsteinA).</li>
<li><code>%A</code> first letter of author (useful for subfolders)</li>
<li><code>%d</code>,<code>%D</code>, <code>%L</code>, <code>%l</code> wildcards for editors, same as for authors.</li>
<li><code>%y</code> year (extracted from Date field)</li>
<li><code>%t</code> title. Usually truncated after : . ? The maximal length of the remaining part of the title can be changed.</li>
<li><code>%T</code> item type (localized)</li>
<li><code>%j</code> name of the journal</li>
<li><code>%p</code> name of the publisher</li>
<li><code>%w</code> name of the journal, publisher, meeting name for presentation etc.</li>
<li><code>%s</code> journal abbreviation</li>
<li><code>%v</code> journal volume</li>
<li><code>%e</code> journal issue</li>
<li><code>%f</code> pages</li>
<li><code>%c</code> collection path (only for sub-folders, not file names). When item is in multiple collections, user can choose between the different collections.</li>
<li><code>%n</code> patent number (patent items only)</li>
<li><code>%i</code> assignee (patent items only)<br />
<!-- - <code>%u</code> issue date (patent items only) --></li>
</ul>
<h4 id="examples"><a name="user-content-examples" href="#examples" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Examples</h4>
<p>Abbott, Andrew, and Alexandra Hrycak (1990): Measuring Resemblance in Sequence Data: An Optimal Matching Analysis of Musicians&rsquo; Careers. American Journal of Sociology 96:144-185.</p>
<ul>
<li>
<p><code>{%a}{-%y}{-%j (%s)}</code> - Abbott-1990-American Journal of Sociology (AJS)</p>
<p>(if either &ldquo;%j&rdquo; or &ldquo;%s&rdquo; is empty, &ldquo;Abbott-1990&rdquo;)</p>
</li>
<li>
<p><code>{%a-}{%y-}{%s|%j}</code> - &ldquo;Abbott-1990-AJS&rdquo; or &ldquo;Abbott-1990-American Journal of Sociology&rdquo; if &ldquo;%s&rdquo; is empty</p>
</li>
<li>
<p><code>{%a_}{%y_}{%t}</code>: Abbott_Hrycak_1990_Measuring Resemblance in Sequence Data</p>
</li>
<li><code>%a-%y %t</code>: Abbott_Hrycak-1990 Measuring Resemblance in Sequence Data</li>
<li>
<p><code>{%w_}{%y_}{%a}</code>: American Journal of Sociology_1990_Abbott_Hrycak</p>
<p>With &lsquo;Maximum number of authors&rsquo; set to 1 and &lsquo;Add suffix &hellip;&lsquo; set to &lsquo;et al&rsquo;</p>
</li>
<li>
<p><code>%a_%y_%t</code>: Abbott et al_1990_Measuring Resemblance in Sequence Data</p>
<p>With &lsquo;Maximum number of authors&rsquo; set to 1, &lsquo;Add suffix &hellip;&lsquo; disabled, and  &lsquo;Maximum length of title&rsquo; set to 10<br />
- <code>%a_%y_%t</code>: Abbott_1990_Measuring</p>
</li>
</ul>
<h3 id="user-defined-wildcards"><a name="user-content-user-defined-wildcards" href="#user-defined-wildcards" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>USER-DEFINED WILDCARDS</h3>
<p>All wildcards are now defined in the hidden preference <code>zotfile.wildcards.default</code> and can be changed by the user. But I <strong>strongly</strong> suggest that you do not change this preference. Instead, there is a second hidden preference  <code>zotfile.wildcards.user</code>, which allows you to add and overwrite wildcards (hidden preference can be changed in <code>about:config</code>). This is a preference for advanced users without any error checking. Be careful what you do and validate your JSON using <a href="http://pro.jsonlint.com/">this site</a>! By default, <code>zotfile.wildcards.user</code> is set to <code>{}</code> so that no user wildcards are defined. Below is an example JSON that defines wildcards for <code>%1</code>, <code>%2</code>, <code>%3</code>, <code>%4</code>, and <code>%5</code> illustrating all the possibilities:</p>
<ol>
<li>String with the name of Zotero field (<code>%1</code>)</li>
<li>
<p>JSON with item type specific field names (<code>%2</code>)</p>
<p>Always include a <code>default</code> value. Otherwise this is not going to work. A list of all item types is available <a href="https://api.zotero.org/itemTypes?pprint=1">here</a>.</p>
</li>
<li>
<p>JSON with <code>field</code> element and transformations based on regular expressions (<code>%3</code> and <code>%4</code>)</p>
<p>ZotFile uses the specified <code>field</code> as an input string and then applies the transformations specified in <code>operations</code>. The value of <code>field</code> can either be the name of a Zotero field (see 1) or a javascript object with item type specific field names (see 2). <code>operations</code> is an array of javascript objects and supports three types of transformations that are identified by the <code>function</code> element:</p>
<ul>
<li>
<p><code>exec</code>: Search for matches using regular expressions (<code>%3</code>). Zotfile uses the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec">exec() function</a> based on the regular expression defined in <code>regex</code>, and returns the element specified in <code>group</code> so that <code>0</code> returns the matched text and higher values the corresponding capturing parenthesis. If the match fails, this operation returns the input data.<br><br />
Required parameters: <code>regex</code><br><br />
Optional parameters: <code>group</code> (default <code>0</code>), <code>flags</code> (default <code>"g"</code>)</p>
</li>
<li>
<p><code>replace</code>: Replaces matches of a pattern using regular expressions (<code>%4</code>). Zotfile uses the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace">replace() function</a> with the regular expression <code>regex</code> and replacement string <code>replacement</code>. The replacement string can include <code>$n</code> for the <em>n</em>th parenthesized sub-match string and other special replacement patterns (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace">replace() documentationn</a>). The wildcard <code>%4</code>, for example, takes the date when an item was added (format <code>2012-02-18 02:31:37</code>) and returns the reformatted date as <code>20120218</code>.<br><br />
Required parameters: <code>regex</code>, <code>replacement</code><br><br />
Optional parameters: <code>flags</code> (default <code>"g"</code>)</p>
</li>
<li>
<p><code>toLowerCase</code> etc: Simple string functions that that do not require any additional arguments(<code>%5</code>). Currently supported are <code>toLowerCase</code>, <code>toUpperCase</code>, and <code>trim</code>.</p>
</li>
</ul>
<p><code>flags</code> is an optional parameter for both searching and replacing and corresponds to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Advanced_Searching_With_Flags">flags for regular expressions</a> in javascript (default: <code>"g"</code>).</p>
</li>
<li>
<p>Finally, the wildcard <code>%5</code> illustrates a complex combination of operations (completely arbitrary).</p>
</li>
</ol>
<h4 id="example-for-user-defined-wildcards"><a name="user-content-example-for-user-defined-wildcards" href="#example-for-user-defined-wildcards" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Example for user-defined wildcards</h4>
<div class="codehilite"><pre><span class="p">{</span>
    <span class="nt">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;publicationTitle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;publicationTitle&quot;</span><span class="p">,</span>
        <span class="nt">&quot;book&quot;</span><span class="p">:</span> <span class="s2">&quot;publisher&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bookSection&quot;</span><span class="p">:</span> <span class="s2">&quot;publisher&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;3&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span>
        <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="s2">&quot;exec&quot;</span><span class="p">,</span>
            <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;([\\w ,-]{1,50})[:\\.?!]?&quot;</span><span class="p">,</span>
            <span class="nt">&quot;group&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}]</span>
    <span class="p">},</span>
    <span class="nt">&quot;4&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;dateAdded&quot;</span><span class="p">,</span>
        <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;replace&quot;</span><span class="p">,</span>
            <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;(\\d{4})-(\\d{2})-(\\d{2})(.*)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;replacement&quot;</span><span class="p">:</span> <span class="s2">&quot;$1$2$3&quot;</span><span class="p">,</span>
            <span class="nt">&quot;flags&quot;</span><span class="p">:</span><span class="s2">&quot;g&quot;</span>
        <span class="p">}]</span>
    <span class="p">},</span>
    <span class="nt">&quot;5&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;\\d&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;replacement&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;exec&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;([\\w ,-]{1,10})[:\\.?!]?&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;group&quot;</span><span class="p">:</span> <span class="mi">1</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;toUpperCase&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;trim&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;journalArticle&quot;</span><span class="p">:</span> <span class="s2">&quot;publicationTitle&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="item-types-and-field-names"><a name="user-content-item-types-and-field-names" href="#item-types-and-field-names" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Item types and field names</h4>
<p>A complete list of Zotero fields is available <a href="https://api.zotero.org/itemFields?pprint=1">here</a> (<code>dateModified</code> and <code>dateAdded</code> seem to be missing from that list) and all the item types are <a href="https://api.zotero.org/itemTypes?pprint=1">here</a>. The fields for each item type are listed on <a href="http://aurimasv.github.io/z2csl/typeMap.xml">this page</a>. Zotfile defines a number of <em>additional fields</em> that can be used as part of wildcards: <code>itemType</code> is the language specific item type, <code>formatedTitle</code> is the title formatted using the options defined in the zofile preferences, <code>author</code> is the author string formatted using the zotfile preferences, <code>authorLastF</code> is the author string formatted as LastnameF, and <code>authorInitials</code> are the initial of the authors.</p>
<h4 id="formatting-rules"><a name="user-content-formatting-rules" href="#formatting-rules" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Formatting rules</h4>
<p>There are a couple of formatting rules for the user-defined wildcards:</p>
<ul>
<li>Wildcards can only be one character</li>
<li>Use double escape characters in regular expression so that a <code>\d</code> becomes <code>\\d</code></li>
<li>Always use <code>"</code> never <code>'</code></li>
</ul>
<p>Most importantly, <a href="http://pro.jsonlint.com/">validate your json</a>. Check out <code>zotfile.wildcards.default</code> for more examples (see below). Finally, the JSON has to be reformatted to one line that can be pasted into the preference field in <code>about:config</code>. Here is the example from above:</p>
<p><code>{"1": "publicationTitle", "2": {"default": "publicationTitle", "book": "publisher", "bookSection": "publisher"}, "3": {"field": "title", "operations": [{"function":"exec", "regex": "([\\w ,-]{1,50})[:\\.?!]?", "group": 1 }] }, "4": {"field":"dateAdded", "operations": [{"function": "replace", "regex": "(\\d{4})-(\\d{2})-(\\d{2})(.*)", "replacement": "$1$2$3", "flags":"g"}] }, "5": {"default": {"field": "title", "operations": [{"function":"replace", "regex": "\\d", "replacement": ""}, {"function": "exec", "regex": "([\\w ,-]{1,10})[:\\.?!]?", "group": 1 }, {"function": "toUpperCase"}, {"function": "trim"} ] }, "journalArticle": "publicationTitle"} }</code></p>
<p>You can use a javascript console such as Firefox&rsquo;s Scratchpad to test whether the JSON is properly formatted:</p>
<div class="codehilite"><pre><span class="nx">wildcard</span> <span class="o">=</span> <span class="s1">&#39;{&quot;1&quot;: &quot;publicationTitle&quot;}&#39;</span><span class="p">;</span>
<span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">wildcard</span><span class="p">)</span>
</pre></div>


<h4 id="default-setting-for-zotfilewildcardsdefault"><a name="user-content-default-setting-for-zotfilewildcardsdefault" href="#default-setting-for-zotfilewildcardsdefault" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Default setting for <code>zotfile.wildcards.default</code></h4>
<p>The information in this file might not be up to date but you can look at the default wildcards and learn something about user-defined wildscards <a href="http://zotfile.com/wildcards-default.json">here</a>. The minified version in one line is <a href="http://zotfile.com/wildcards-default-min.json">here</a> so that you can copy it to <code>zotfile.wildcards.default</code> if you screw up.</p>
<h3 id="extract-pdf-annotations"><a name="user-content-extract-pdf-annotations" href="#extract-pdf-annotations" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>EXTRACT PDF ANNOTATIONS</h3>
<p>Zotfile can extracted annotations and highlighted text from many PDF files. The extracted annotations are saved in Zotero notes and you can go back to the annotation in the pdf by clicking on the link after the extracted text. PDFs are a very complex format and the extraction will never work for all files. If you can not copy &amp; paste meaningful text from the file in your pdf viewer (open your pdf viewer (not the browser plugin), select text, copy and paste it somewhere), zotfile won&rsquo;t be able to extract the highlighted text either. If you can, there is a chance that future versions of zotfile will solve the problem. When you have a pdf file that does not work or with clear spacing problems, feel free to share the file on the <a href="https://forums.zotero.org/discussion/5301/">zotfile thread</a> in the Zotero forum or upload it to the <a href="https://www.zotero.org/groups/zotfile">zotfile Zotero group</a> in the <code>PUT FILES HERE</code> folder. But only share files for which you can copy and paste text! Otherwise you are wasting everyone&rsquo;s time.<br />
On Mac OS, you can also use poppler to extract pdf annotations (ZotFile Preferences -&gt; Advanced Settings). Currently, pdf.js is more reliable and should be the default in most cases. The poppler-based tool, however, is faster and might handle certain pdf standards that are not yet supported by pdf.js.</p>
<h4 id="goto-annotation-in-pdf"><a name="user-content-goto-annotation-in-pdf" href="#goto-annotation-in-pdf" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Goto Annotation in PDF</h4>
<p>Zotfile adds a link to extracted annotations that allows you to open the pdf file at the page with the annotation. Just click on the link after some extracted text and your pdf should open on the correct location. <strong>On Windows</strong>, zotfile detects the default pdf viewer and opens the pdf on the correct page (not tested for Windows 8). Adobe Reader, Foxit and PDF-XChange all work (other might as well but are untested). Adobe Reader, however, does not jump to the correct page when the file is already open (Foxit and PDF-XChange do). If zotfile is unable to detect the default viewer or you want to force zotfile to use a different viewer, simply change the hidden option <code>zotfile.pdfExtraction.openPdfWin</code> to the desired path (e.g. <code>C:\Program Files\Adobe\Reader 11.0\Reader\AcroRd32.exe</code>). <strong>On Mac OS</strong>, zotfile works with Preview (the default) and Skim. Preview, however, does not support scripting very well and has certain limitations. Don&rsquo;t press any keys while the pdf is opening, for example. <a href="http://skim-app.sourceforge.net/">Skim</a>, an alternative pdf viewer for Mac OS, works much better! Just set the hidden option <code>zotfile.pdfExtraction.openPdfMac_skim</code> to <code>true</code> and zotfile will open the pdf in Skim. <strong>For Linux</strong>, zotfile first tries <code>okular</code> and then <code>evince</code> but you can also set the <code>zotfile.pdfExtraction.openPdfLinux</code> option to change the default behavior. One example would be <code>/usr/bin/okular -p</code>, which tell zotfile the path and the argument for the page number.</p>
<h3 id="hidden-options"><a name="user-content-hidden-options" href="#hidden-options" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>HIDDEN OPTIONS</h3>
<p>Zotfile has a number of hidden options that allow you to further configure zotfile. You can access the hidden options through about:config. In Zotero Firefox, type <code>about:config</code> in the url bar. In Zotero Standalone, go to Actions-&gt;Preferences-&gt;Advanced-&gt;Open <code>about:config</code>.</p>
<p>Search for <code>extensions.zotfile</code> to see a list of the hidden zotfile options. Here is a list of the options that can be changed by the user (I strongly discourage  to change any of the other options):</p>
<ul>
<li>
<p><code>.allFiles</code></p>
<p>By default, zotfile&rsquo;s &lsquo;Attach New File&rsquo; function attaches the most recently modified file from the user defined folder. With this option set to true, zotfile attaches all files in the user defined folder to the currently selected zotero item. (Note: I haven&rsquo;t tested this for a while but it should still work)</p>
</li>
<li>
<p><code>.disable_renaming</code></p>
<p>Disable any renaming of files - just moves them to the specified location.</p>
</li>
<li>
<p><code>.tablet.mode</code></p>
<p>In <em>background mode</em> (mode=1, default), zotfile leaves zotero attachments at their current location and moves a copy of the file to the tablet folder (set in the zotfile preference window) when they are send to the tablet. Getting the file back from the tablet replaces the zotero attachment file and removes it from the tablet folder. This mode is recommended when you sync attachment files in your zotero library across multiple computers or when you index your attachments.</p>
<p>The <em>foreground mode</em> (mode=2) moves the attachment file to the tablet folder and links to this location from zotero. In this mode there is always only one copy of the file. You can not, however, sync linked attachments to the zotero server.</p>
</li>
<li>
<p><code>.confirmRepush</code></p>
<p>By default, zotfile asks the user whether an attachment should be send to the tablet that is already on the tablet, which can be useful to move it to a different subfolder. This user confirmation can be disabled with this option.</p>
</li>
<li>
<p><code>.tablet.tagParentPush</code>, <code>.tablet.tagParentPush_tag</code>, <code>.tablet.tagParentPull</code>, <code>.tablet.tagParentPull_tag</code></p>
<p>These options allow the user to tag the parent item when sending (push) or getting back (pull) attachments to or from the tablet.</p>
</li>
<li>
<p><code>.pdfExtraction.NoteHtmlTagStart</code>, <code>.pdfExtraction.NoteHtmlTagEnd</code>, <code>.pdfExtraction.HighlightHtmlTagStart</code>, <code>.pdfExtraction.HighlightHtmlTagEnd</code>, <code>.pdfExtraction.UnderlineHtmlTagStart</code>, <code>.pdfExtraction.UnderlineHtmlTagEnd</code></p>
<p>These options allow the user to fine-tune the formatting of the extracted PDF annotations in the zotero note. They define the opening and closing html tag for different types of annotations. The default settings format highlighted text from the pdf normally, note text in italics (&lt;i&gt; for start and &lt;/i&gt; for end), and underline underlined text (&lt;u&gt; for start and &lt;/u&gt; for end). The end options for note, highlight and underline have to be the closing tag for the corresponding start option.</p>
</li>
<li>
<p><code>.pdfExtraction.NoteRemoveHyphens</code></p>
<p>By default, zotfile removes hyphens from extracted text. Setting NoteRemoveHyphens to false, disables this option.</p>
</li>
<li>
<p><code>.UsePDFJSandPoppler</code></p>
<p>With this option, zotfile extracts PDF annotations twice using both pdf.js and poppler. This option only works on Mac OS when the poppler based extraction script is installed.</p>
</li>
<li>
<p><code>info_window_duration</code>, <code>info_window_duration_clickable</code></p>
<p>Duration (in milliseconds) for which the info windows show up.</p>
</li>
<li>
<p><code>pdfExtraction.replacements</code></p>
<p>Custom, regular expression-based replacements in extracted annotations. This can be useful because some pdfs contain ‘broken’ characters. For example, [{"regex":" ?\u00f0", "replacement": " ("}] replaces the unicode character ð with ( to fix a problem in pdfs from a certain publisher. In this case, ð is a problem with the pdf and not with zotfile’s extraction. The hidden option can be used to fix it.</p>
</li>
</ul>
<h3 id="reporting-a-bug"><a name="user-content-reporting-a-bug" href="#reporting-a-bug" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>REPORTING A BUG</h3>
<p>You can report bugs on the <a href="http://forums.zotero.org/discussion/5301/6/zotfile-zotero-plugin-to-rename-move-and-attach-pdfs-send-them-to-ipad-extract-pdf-annotations/">Zotfile thread</a> in the Zotero forum. Please provide information about about your system (Windows, Mac OS, Linux etc) as well as your Zotfile, Zotero and Firefox version. Also make sure that you can reproduce the bug and describe the steps as closely as possible. In addition, any information from the Error Console are very helpful. You can check the Error Console in Zotero for Firefox by going to &lsquo;Tools-&gt;Web Dev.-&gt;Error Console&rsquo; in Firefox and look for any zotfile related stuff after the bug occurred. For zotfile bugs,  the &lsquo;Source File&rsquo; should be something like <code>chrome://zotfile/content/...</code> (most likely zotfile.js). You can also clear the console, execute the actions that caused the problem and then check again. If I ask you to provide a Report ID, follow the instructions <a href="http://www.zotero.org/support/reporting_bugs">here</a>.</p>
<h3 id="changelog"><a name="user-content-changelog" href="#changelog" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>CHANGELOG</h3>
<h4 id="changes-in-40"><a name="user-content-changes-in-40" href="#changes-in-40" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 4.0 and 4.1</h4>
<ul>
<li>
<p><strong>Goto annotation in pdf</strong></p>
<p>This is not really a new feature but with two recent changes in Zotero (see <a href="https://github.com/zotero/zotero/pull/450">this</a> and <a href="https://github.com/zotero/zotero/pull/452">this</a> pull request), it became much more useful! Simply click on the link that is part of your extracted annotations, and zotfile will open the pdf on the page with the annotation. The feature now works on Windows as well (thanks to aurimasv) and I have added support for Skim on Mac. Check out the <a href="http://zotfile.com/index.html#extract-pdf-annotations">documentation</a> for some more details.</p>
</li>
<li>
<p><strong>Improved extraction of annotation</strong></p>
<p>This version includes four improvements for the extraction of annotations. First, the new version greatly improves the detection of correct spaces between words. Second, the extraction is now based on the most recent pdf.js version (<a href="https://github.com/jlegewie/pdf.js/tree/extract-v3">here</a> is my fork with the modified version of <a href="https://github.com/mozilla/pdf.js">pdf.js</a> used in zotfile). With this update, zotfile should work with more pdfs. Second, the extraction is now about 40-60% faster (depending on the pdf) thanks to some improvements in the extraction code. Third, the extraction now runs in the background so that Zotero is not blocked while annotations are extracted. </p>
</li>
<li>
<p><strong>Get Table of Contents from PDF</strong></p>
<p>Similar to <a href="http://blog.mendeley.com/progress-update/desktop-contents-tables-and-figures/">Mendeley</a>, ZotFile can now get the table of contents from PDF and save it with links to the correct page in attachment notes. Simply click on the the desired section and zotfile opens the pdf on the correct page. Zotfile automatically extracts the table of content for all newly added pdf attachments (disable with <code>zotfile.pdfOutline.getToc</code> setting) or you can manually extract the toc using &lsquo;Manage Attachments-&gt;Get Table of Contents&rsquo; (remove menu item with <code>zotfile.pdfOutline.menuItem</code> setting). This feature only works for pdfs that have an embedded table of content. Unfortunately, many don&rsquo;t. </p>
</li>
<li>
<p><strong>Support for sub-folders based on collection path</strong> (via wildcard %c) (thanks to <a href="https://github.com/simpzan">simpzan</a>)</p>
</li>
<li>
<p><strong>Tablet status is now shown in right-pane with other attachment information</strong></p>
<p>The right pane now includes a row with the current tablet status such as <code>No</code> for files that are not on the tablet or <code>[Basefolder]</code> for files that are in the tablet base-folder. Click on this information to change the tablet status and open or reveal the file on the tablet (very convenient because double-clicking on the attachment opens the imported zotero attachment and not the file on the tablet).</p>
</li>
<li>
<p><strong>Extract Annotation Color</strong> (thanks to <a href="https://github.com/RAG2ko">RAG2ko</a>)</p>
<p>Zotfile now extracts the color of annotations. The color can be used in two ways: (a) To format extracted annotations: Just add some css styling to the hidden options for formatting. For example, change <code>formatAnnotationHighlight</code> to <code>&lt;p style="background-color:%(color);"&gt;"%(content)" (%(cite))&lt;/p&gt;</code>. The wildcard <code>%(color)</code> is replaced by the annotation color (you can also use %(color_category) for the color category&mdash;reddish is red etc). This styling has the same effect but looks a little better: <code>&lt;p&gt;&lt;span style="background-color:%(color);"&gt;"%(content)"&lt;/span&gt; (%(cite))&lt;/p&gt;</code> (b) To create separate notes for color categories: The hidden option <code>pdfExtraction.colorNotes</code> allows you to create a separate note for each color category (yellow, red, green etc annotations).</p>
</li>
<li>
<p>Improved formatting of extracted annotations with hidden options (<code>formatNoteTitle</code>, <code>formatAnnotationNote</code>, <code>formatAnnotationHighlight</code>, <code>formatAnnotationUnderline</code>)</p>
<p>WARNING: I removed the old settings. You will have to change the new settings if you want to customize the format of the note with extracted annotations.</p>
</li>
<li>
<p>Improved default PDF reader detection on Windows (thanks to aurimasv)</p>
</li>
<li>Hidden option <code>pdfExtraction.replacements</code> for custom, regular expression-based replacements in extracted annotations. This can be useful because some pdfs contain &lsquo;broken&rsquo; characters. For example, <code>[{"regex":" ?\u00f0", "replacement": " ("}]</code> replaces the unicode character <code>ð</code> with <code>(</code> to fix a problem in pdfs from a certain publisher. In this case, <code>ð</code> is a problem with the pdf and not with zotfile&rsquo;s extraction. The hidden option can be used to fix it.</li>
<li>Information for attachments on the tablet is now hidden in the attachment note</li>
<li>Improved information windows</li>
<li>Improved renaming function (avoids re-indexing of linked attachments)</li>
<li>New wildcards for editors (<code>%d</code>, <code>%D</code>, <code>%L</code>, <code>%l</code>)</li>
<li>Fix bug with unnecessary suffix after multiple renames of same file</li>
<li>Further improvements for the extraction of annotations in 4.1</li>
<li>Truncate title after '!'</li>
</ul>
<h4 id="changes-in-31"><a name="user-content-changes-in-31" href="#changes-in-31" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 3.1</h4>
<ul>
<li>New zotfile webpage at <a href="http://www.zotfile.com/"><a href="http://www.zotfile.com"><a href="http://www.zotfile.com">www.zotfile.com</a></a></a> (please update links)</li>
<li>User-defined wildcards</li>
<li>watch folder now adds an attachment and retrieves metadata if no file is selected<br />
  (change message, change version)</li>
<li>fix pdf.js issue with some pdf annotation (see <a href="https://forums.zotero.org/discussion/31903/extract-pdf-annotations-message-hangs-on-linuxubuntu/#Comment_177201">this</a> discussion)</li>
<li>New hidden preferences for duration of info windows (<code>info_window_duration</code> and <code>info_window_duration_clickable</code>)</li>
<li>The <code>%w</code> wildcard now maps to the correct field for most item types</li>
<li>The <code>%u</code> wildcard as redundant (use <code>%y</code> instead)</li>
<li>Choose the number of authors to display when truncating authors during renaming (thanks to bwiernik)</li>
<li>fix problem that small info window does not disappear</li>
</ul>
<h4 id="changes-in-303"><a name="user-content-changes-in-303" href="#changes-in-303" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 3.0.3</h4>
<ul>
<li>fix for issue with showing website on every restart</li>
<li>fix for issue when adding new attachment</li>
</ul>
<p>Other small fixes mainly for Italian translation, restriction of saved searches and renaming based on collections.</p>
<h4 id="changes-in-30"><a name="user-content-changes-in-30" href="#changes-in-30" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 3.0</h4>
<ul>
<li>
<p><strong>Improved extraction of annotation</strong></p>
<p>The extraction of pdf annotations using pdf.js works much better now! Zotfile uses a modified version of the updated <a href="https://github.com/mozilla/pdf.js">pdf.js</a> library (<a href="https://github.com/jlegewie/pdf.js">here</a> is the fork). The new version supports more pdf standards, detects spaces more precisely, sorts annotations in the correct order, and future updates to new versions of pdf.js are relatively easy. There are still  pdfs that won&rsquo;t work though! Some pdf standards are not yet supported and if you can not copy &amp; paste text from the pdf file using your pdf viewer (e.g. Preview), it&rsquo;s unlikely that zotfile can help.</p>
</li>
<li>
<p><strong>Goto annotation in pdf</strong></p>
<p>The extracted annotations now include a link that opens the pdf file on the corresponding page. For the extracted annotation <code>"This is my text" (zotfile 2013: 4)</code>, <code>zotfile 2013: 4</code> is a link that opens the pdf on the page with the annotation. Currently, this feature only works from reports (right-click on item and select <code>generate report</code>) but future version of Zotero might be able to open the links directly from the note (see discussion <a href="https://forums.zotero.org/discussion/15186/clickable-links-in-notes/">here</a> and <a href="https://forums.zotero.org/discussion/25832/note-hyperlinks-in-standalone/">here</a>)</p>
</li>
<li>
<p><strong>Tablet feature: Restrict saved search for tablet files to sub-folders</strong></p>
<p>You can now right-click on the two saved searches for tablet files and restrict them to one of your custom sub-folders. This is very helpful to quickly see the files that are in a specific sub-folder.</p>
</li>
<li>
<p><strong>Tablet feature: Support of colored tags in Zotero 4</strong></p>
<p>Zotfile now tags the parent item when an attachment is send to the tablet so that you can easily see which items are on the tablet. Simply assign colors to the two tablet tags (<code>_tablet</code> and <code>_tablet_modified</code>). But DO NOT manually add the tag to items or attachments (also not using the keys for colored tags).<br />
<!-- The new version includes two major changes that allow you to work with colored tags. First, zotfile now also tags the parent item when an attachment is send to the tablet. As a result, you can easily see which items are on the tablet and also which items have been modified. Second, using the keys associated with colored tags, you can now send attachments to the tablet and get them back with a simple keystroke. Note that the two tablet tags (<code>_tablet</code> and <code>_tablet_modified</code>) behave like one tag for key presses: pressing the key for either of the two tags *always* sends attachments to the tablet or gets them back. An attachment, for example, might only have the <code>_tablet_modified</code> tag because it was modified but pressing the key for the tablet tag <code>_tablet</code> still removes the attachment from the tablet and therefore *does not* assign the <code>_tablet</code> tag. To use these features, simply assign colors to the two tablet tags (<code>_tablet</code> and <code>_tablet_modified</code>). --></p>
</li>
<li>
<p>Italian localization (thanks to Roberto Caviglia)</p>
</li>
<li>Remove empty sub-folders when getting files from tablet</li>
<li>Fix alert window (headline was missing in Zotero 4)</li>
<li>Fix automatic renaming option &ldquo;Only ask if&hellip;&ldquo;</li>
<li>Fix for zotfile item menu on Zotero as a tab</li>
</ul>
<h4 id="changes-in-234"><a name="user-content-changes-in-234" href="#changes-in-234" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.3.4</h4>
<ul>
<li>compatible with Zotero 4.0</li>
<li>Annotation extraction compatible with FF 20</li>
</ul>
<h4 id="changes-in-231"><a name="user-content-changes-in-231" href="#changes-in-231" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.3.1</h4>
<ul>
<li>adding attachments from watched folder now works when child item is selected</li>
<li>language improvements for French and German</li>
<li>bug fix for subfolders based on wildcards</li>
</ul>
<h4 id="changes-in-23"><a name="user-content-changes-in-23" href="#changes-in-23" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.3</h4>
<ul>
<li>
<p><strong>enhanced renaming rules</strong> (thanks to <a href="https://github.com/Midnighter">Midnighter</a>)</p>
<p>1) Optional wild-cards: <code>{-%y}</code> only includes <code>-</code> if  <code>%y</code> is defined.</p>
<p>2) Exclusive wild-cards: <code>%s|%j</code> journal abbr. or if not defined full journal name.</p>
<p>(for examples see below)</p>
</li>
<li>
<p>additional wild-cards for author formating (author initials <code>%I</code> and lastnameF <code>%F</code>), pages (<code>%f</code>) and short title (<code>%h</code>)</p>
</li>
<li>
<p><strong>watch source folder for new files</strong></p>
<p>Whenever the focus changes to the item list in Zotero, Zotfile checks for new files in the source folder. If a new file was added to the folder, zotfile uses a clickable, non-disruptive window to ask the user whether s/he wants to attach that file to the currently selected Zotero item.</p>
</li>
<li>
<p><strong>revised auto rename with additional options</strong></p>
<p>Four options: Never, Always ask, Only ask if item has other atts, Always rename. The &lsquo;asking&rsquo; uses a clickable, non-disruptive window that appears in the bottom right corner - same as previous info window but clickable.</p>
</li>
<li>
<p><strong>revised notifications and error handling</strong></p>
</li>
<li><strong>Zotfile translation to German</strong> (thanks to <a href="https://github.com/wuffi">wuffi</a>) <strong>and French</strong> (thanks to <a href="https://github.com/gracile-fr">gracile-fr</a>)</li>
<li>Allow periods as delimiter in filenames (thanks to <a href="https://github.com/jjatria">jjatria</a>)</li>
<li>new option: &ldquo;lower case&rdquo; filenames (thanks to <a href="https://github.com/jjatria">jjatria</a>)</li>
<li>new option: disable renaming so that attachments are only moved (hidden: <code>.disable_renaming</code>)</li>
<li>new option: set opening and closing quotation mark for extracted annotations (hidden: <code>.openingQuotationMarks</code>, <code>.closingQuotationMarks</code>)</li>
<li>new option: remove periods from filenames (hidden: <code>removePeriods</code>)</li>
<li>bug fix: download of poppler tool was broken</li>
<li>bug fix: preview of renaming rules for Unix and Windows</li>
<li>bug fix: sending to and getting from tablet deleted note content</li>
</ul>
<p><strong>Examples for enhanced renaming rules</strong><br />
<code>%j</code> - journal; <code>%s</code> - journal abbreviation</p>
<p><code>{%a}{-%y}{-%j (%s)}</code> - <code>author-2001-Proceedings of the National Academy of Sciences (PNAS)</code><br />
(if either <code>%j</code> or <code>%s</code> is empty, <code>author-2001</code>)</p>
<p><code>{%a-}{%y-}{%s|%j}</code> - <code>author-2001-PNAS</code> or <code>author-2001-Proceedings...</code> if <code>%s</code> is empty</p>
<p>For full description, see <a href="#renaming-rules">renaming rules</a>.</p>
<h4 id="changes-in-223"><a name="user-content-changes-in-223" href="#changes-in-223" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.2.3</h4>
<ul>
<li>bug fix: check whether selected attachments are valid (no top-level item, no web attachments and attachment exists)</li>
<li>bug fix: editing custom folder created error if user had maximum number of custom folders</li>
</ul>
<h4 id="changes-in-222"><a name="user-content-changes-in-222" href="#changes-in-222" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.2.2</h4>
<ul>
<li>Add option to change delimiter between multiple authors (thanks to <a href="https://github.com/gracile-fr">gracile-fr</a>)</li>
</ul>
<h4 id="changes-in-22"><a name="user-content-changes-in-22" href="#changes-in-22" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.2</h4>
<ul>
<li>New feature: automatic renaming of attachment files (thanks to <a href="www.rtwilson.com/academic">Robin Wilson</a>)</li>
<li>Bug fix: zotfile produced error when trying to move open files on Windows (thanks to Dominik)</li>
</ul>
<h4 id="changes-in-21"><a name="user-content-changes-in-21" href="#changes-in-21" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.1</h4>
<ul>
<li>Important: the tag for tablet files was changed from &lsquo;_READ&rsquo; to &lsquo;_tablet&rsquo;</li>
<li>New saved search for modified files on tablet<br />
  (updates automatically, replaces &lsquo;Scan Tablet Files&rsquo; function, which has been removed)</li>
<li>Zotfile menu items only appear for bibliographic items and attachments (not for notes)</li>
<li>Bug fix: allow the extraction of annotations in group libraries</li>
<li>Other bug fixes</li>
</ul>
<h4 id="changes-in-20"><a name="user-content-changes-in-20" href="#changes-in-20" class="headeranchor-link"  aria-hidden="true"><span class="headeranchor"></span></a>Changes in 2.0</h4>
<ul>
<li>Sync Zotero Attachments with your iPad or Android tablet</li>
<li>Extract Annotations from PDF Files (thanks to Joe Devietti)</li>
<li>redesigned preference pane</li>
<li>many more features and bug fixes</li>
</ul>

<!-- FOOTER -->
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jlegewie">jlegewie</a><br>
        <small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
  </body>
</html>